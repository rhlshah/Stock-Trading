<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Your Portfolio</title>
    <link rel="stylesheet"
          type="text/css"
          href="https://cdn.datatables.net/v/bs4/dt-1.10.25/datatables.min.css" />
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
          integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
          crossorigin="anonymous" />
</head>
<body>
<nav class="navbar navbar-expand">
    <div class="container-fluid">
        <ul class="nav navbar-nav">
            <li><a href="/portfolio">Home</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
            <li><a href="/stocks">Stocks</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
            <li><a href="/history">Transactions</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
            <li><a href="/checkBalance">Account</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
            <li><a href="/marketinfo">Market Hours</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
            <l1><a href="/logout">Logout</a></l1>
        </ul>
    </div>
</nav>
    <div class = "container">
        <h2>Your Portfolio</h2>
        <td>Total Portfolio Value: $<span th:text="${totalValue}">0.00</span></td>
        <hr/>
        <table class = "table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Stock Ticker</th>
                    <th>Quantity</th>
                    <th>Value</th>
                    <th>Manage</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each = "p : ${portfolio}">
                    <td th:text = "${p.ticker}"></td>
                    <td th:text = "${p.quantity}"></td>
<!--                    <td th:text = "${p.quantity}"></td>-->
                    <td th:text = "${p.quantity}*${prices.get(p.ticker)}"></td>
                    <!-- TODO : Add value of stock -->
<!--                    <td th:text = "${p.quantity * ${stocks[i.index].curPrice}}"></td>-->

                    <td>
                        <form method="post" action="/sell">
                            <p>
                                <input type="number" id="quantity" name="quantity" class="form-control" placeholder="Quantity to Sell">
                                <input type="hidden" id="ticker" name="ticker" th:value="${p.ticker}" readonly="readonly">
                            </p>
                            <button  type="submit">Submit</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>